@import "himation/mixins/layout";

// Apply form-input styles to a caller that contains an input and a label
//
// This expects the caller to be a container for an input tag followed by a
// label tag.
//
// @param <length> $padding The padding to apply to the input
// @param <boolean> $is-stacked Whether the input is stacked with others
@mixin himation--input-label-pair($padding, $is-stacked) {

  input {
    @include himation--hide;
  }

  label {
    background-color: $himation--input-bg-color;
    box-sizing: border-box;
    cursor: pointer;
    font-weight: $himation--font-weight-semi-bold;
    padding: $padding;

    @if $is-stacked {
      border-left: 1px solid $himation--input-bg-color;
    } @else {
      border: 1px solid $himation--input-bg-color;
      border-bottom-color: $himation--input-border-color;
    }
  }

  label:hover,
  input:focus + label {
    $_bg-color: mix($himation--form-field-bg-color, $himation--input-bg-color, 50%);

    background-color: $_bg-color;
    border-color: $_bg-color;

    @if not $is-stacked {
      border-bottom-color: $himation--input-border-color;
    }
  }

  input:focus + label {
    @if $is-stacked {
      border-left-color: darken($himation--input-border-color, 10%);
      box-shadow: 1px 0 0 darken($himation--input-border-color, 10%) inset;
    } @else {
      border-color: darken($himation--input-border-color, 10%);
    }
  }

  input:checked + label {
    background-color: $himation--input-active-bg-color;
    color: $himation--branding-text-color;

    @if $is-stacked {
      border-color: $himation--input-active-bg-color;
    } @else {
      border-color: $himation--input-active-border-color;
    }
  }

  input:checked + label:hover,
  input:checked:focus + label {
    background-color: darken($himation--input-active-bg-color, 5%);
  }

  input:checked:focus + label {
    @if $is-stacked {
      border-color: $himation--input-active-border-color;
      box-shadow: 1px 0 0 $himation--input-active-border-color inset;
    } @else {
      box-shadow: 0 0 0 1px rgba($himation--branding-text-color, 75%) inset;
    }
  }

}

// Show a radio input as simple block with a hidden input
//
// @param <length> $padding The padding to apply to the input
// @param <boolean> $is-stacked Whether the input is stacked with others
@mixin himation--radio-button-container($padding: 1em, $is-stacked: false) {
  @include himation--input-label-pair($padding, $is-stacked);
}

// Show an checkbox input using a styled, managed checkbox
//
// @param <length> $padding The padding to apply to the input
// @param <length> $checkbox-size The size of the checkbox
// @param <boolean> $is-stacked Whether the input is stacked with others
@mixin himation--checkbox-container($padding: 1em, $checkbox-size: 0.75em, $is-stacked: false) {
  @include himation--input-label-pair($padding, $is-stacked);

  label {
    padding-left: $padding * 2 + $checkbox-size;
    position: relative;

    &::before {
      background-color: $himation--page-bg-color;
      border: 2px solid currentColor;
      content: "";
      display: block;
      height: $checkbox-size;
      left: $padding;
      margin-top: -0.5em;
      position: absolute;
      top: 50%;
      width: $checkbox-size;
    }
  }

  input:checked + label {
    &::before {
      background-color: $himation--input-active-border-color;
      border-color: $himation--input-active-border-color;
    }

    &::after {
      border: 0.125em solid currentColor;
      border-right: 0;
      border-top: 0;
      content: "";
      height: $checkbox-size * 0.25;
      left: $padding + $checkbox-size * 0.25;
      margin-top: -0.25em;
      position: absolute;
      top: 50%;
      transform: rotate(-45deg);
      width: $checkbox-size * 0.75;
    }
  }
}
